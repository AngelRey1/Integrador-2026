<header class="shared-header" [class.header-hidden]="isHidden">
  <div class="header-content">
    <!-- Logo/Nombre que lleva a home -->
    <div class="logo-section" (click)="goHome()">
      <span class="logo-icon">⚽</span>
      <span class="logo-text">Sportconnecta</span>
    </div>

    <!-- Botón de Menú -->
    <button class="menu-toggle" (click)="toggleMenu()" [class.open]="menuOpen">
      <nb-icon [icon]="menuOpen ? 'close-outline' : 'menu-outline'"></nb-icon>
    </button>
  </div>
</header>

<!-- Sidebar lateral derecho -->
<aside class="sidebar-menu" [class.show]="menuOpen">
  <!-- Header del sidebar -->
  <div class="sidebar-header">
    <span class="sidebar-logo">⚽</span>
    <span class="sidebar-title">Sportconnecta</span>
    <button class="sidebar-close" (click)="toggleMenu()">
      <nb-icon icon="close-outline"></nb-icon>
    </button>
  </div>

  <div class="sidebar-content">
    <!-- Sección de Deportes -->
    <div class="sidebar-section">
      <h3 class="sidebar-section-title">
        <nb-icon icon="heart-outline"></nb-icon>
        DEPORTES
      </h3>
      <div class="deportes-grid">
        <button 
          *ngFor="let deporte of deportes" 
          class="deporte-chip"
          (click)="filtrarPorDeporte(deporte)">
          {{ deporte }}
        </button>
      </div>
    </div>

    <!-- Separador decorativo -->
    <div class="sidebar-divider">
      <span class="divider-line"></span>
    </div>

    <!-- Sección Mi Cuenta -->
    <div class="sidebar-section">
      <h3 class="sidebar-section-title">
        <nb-icon icon="person-outline"></nb-icon>
        MI CUENTA
      </h3>
      
      <!-- Si NO está logueado -->
      <div *ngIf="!isLoggedIn" class="auth-section">
        <p class="auth-subtitle">¿Cómo quieres ingresar?</p>
        
        <div class="auth-buttons-stack">
          <button class="auth-btn-modern cliente" (click)="irALogin('CLIENTE')">
            <div class="auth-icon-wrapper">
              <nb-icon icon="person-outline"></nb-icon>
            </div>
            <div class="auth-btn-info">
              <span class="auth-btn-title">Iniciar como Cliente</span>
              <span class="auth-btn-desc">Reserva entrenamientos</span>
            </div>
            <nb-icon icon="chevron-right-outline" class="auth-arrow"></nb-icon>
          </button>

          <button class="auth-btn-modern entrenador" (click)="irALogin('ENTRENADOR')">
            <div class="auth-icon-wrapper">
              <nb-icon icon="star-outline"></nb-icon>
            </div>
            <div class="auth-btn-info">
              <span class="auth-btn-title">Iniciar como Entrenador</span>
              <span class="auth-btn-desc">Ofrece tus servicios</span>
            </div>
            <nb-icon icon="chevron-right-outline" class="auth-arrow"></nb-icon>
          </button>
        </div>

        <div class="auth-footer-box">
          <p>¿No tienes cuenta?</p>
          <a (click)="irARegistro()" class="link-registro-modern">
            Regístrate aquí
            <nb-icon icon="arrow-forward-outline"></nb-icon>
          </a>
        </div>
      </div>

      <!-- Si SÍ está logueado -->
      <div *ngIf="isLoggedIn" class="user-section-modern">
        <div class="user-card">
          <div class="user-avatar-large">
            <nb-icon icon="person-outline"></nb-icon>
          </div>
          <div class="user-details-modern">
            <span class="user-name-large">{{ userName }}</span>
            <span class="user-role-badge">{{ userRole }}</span>
          </div>
        </div>

        <div class="user-actions-modern">
          <button 
            *ngIf="userRole === 'CLIENTE'" 
            class="panel-btn-modern cliente"
            (click)="irAPanelCliente()">
            <nb-icon icon="grid-outline"></nb-icon>
            Panel de Cliente
          </button>

          <button 
            *ngIf="userRole === 'ENTRENADOR'" 
            class="panel-btn-modern entrenador"
            (click)="irAPanelEntrenador()">
            <nb-icon icon="star-outline"></nb-icon>
            Panel de Entrenador
          </button>

          <button class="logout-btn-modern" (click)="cerrarSesion()">
            <nb-icon icon="log-out-outline"></nb-icon>
            Cerrar sesión
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer del sidebar -->
  <div class="sidebar-footer">
    <p>© 2026 Sportconnecta</p>
    <p class="footer-tagline">Entrena con los mejores</p>
  </div>
</aside>

<!-- Overlay para cerrar el menú al hacer clic fuera -->
<div class="sidebar-overlay" [class.show]="menuOpen" (click)="toggleMenu()"></div>
