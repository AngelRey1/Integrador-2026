<nb-layout>
  <nb-layout-column class="no-layout-padding">
    <ngx-shared-header></ngx-shared-header>

    <div class="entrenadores-page">
  <!-- Enlace Volver Minimalista -->
  <div class="back-link-minimal">
    <button type="button" class="link-volver" (click)="irAtras()">
      <i eva-icon="arrow-back-outline" eva-pack="outline"></i>
      <span>Volver</span>
    </button>
  </div>

  <!-- Carrusel de Destacados -->
  <section class="destacados-carousel" *ngIf="entrenadoresDestacados.length > 0">
    <div class="container">
      
      <div class="carousel-container">
        <button class="carousel-btn prev" (click)="anteriorDestacado()">
          ‚ùÆ
        </button>

        <div class="carousel-content">
          <div 
            *ngFor="let entrenador of entrenadoresDestacados; let i = index"
            class="carousel-item"
            [class.active]="i === carruselIndex"
          >
            <div class="carousel-card-horizontal" [style.background-image]="getImagenDeporte() ? 'url(' + getImagenDeporte() + ')' : ''">
              <div class="carousel-left">
                <h2 class="carousel-title">
                  Entrenadores Destacados
                </h2>
                <h3 class="carousel-nombre">{{ entrenador.nombre }}</h3>
                <p class="carousel-ubicacion">üìç {{ entrenador.ubicacion }} | {{ getDeporteEntrenador(entrenador) }}</p>
                <div class="carousel-rating">
                  <span *ngFor="let star of getEstrellas(entrenador.calificacion)" class="star">
                    {{ star === 'full' ? '‚≠ê' : '‚òÜ' }}
                  </span>
                  <span class="rating-text">{{ entrenador.calificacion }} ({{ entrenador.totalResenas }})</span>
                </div>
                <p class="carousel-precio">${{ entrenador.precioHora }}/hora</p>
                <button class="btn-ver-perfil" (click)="verPerfil(entrenador)">
                  VER PERFIL
                </button>
              </div>
              <div class="carousel-right">
                <div class="photo-wrapper">
                  <img [src]="entrenador.foto" [alt]="entrenador.nombre" />
                </div>
              </div>
            </div>
          </div>
        </div>

        <button class="carousel-btn next" (click)="siguienteDestacado()">
          ‚ùØ
        </button>
      </div>

      <!-- Indicadores -->
      <div class="carousel-indicators">
        <span 
          *ngFor="let entrenador of entrenadoresDestacados; let i = index"
          class="indicator"
          [class.active]="i === carruselIndex"
          (click)="irADestacado(i)"
        ></span>
      </div>
    </div>
  </section>

  <!-- Filtros y B√∫squeda -->
  <section class="filtros-section" #filtrosSectionRef>
    <div class="container">
      <div class="filtros-header">
        <h2>Encuentra tu entrenador perfecto</h2>
        <p>{{ entrenadoresFiltrados.length }} entrenadores disponibles</p>
      </div>

      <div class="filtros-container-modern">
        <!-- B√∫squeda -->
        <div class="filtro-pill">
          <i eva-icon="search-outline" eva-pack="outline" class="icon-search"></i>
          <input 
            type="text" 
            [(ngModel)]="searchQuery"
            (ngModelChange)="aplicarFiltros(true)"
            placeholder="Buscar por nombre o deporte..."
            class="input-pill"
          />
        </div>

        <!-- Deporte -->
        <div class="filtro-pill">
          <i eva-icon="heart-outline" eva-pack="outline" class="icon-filter"></i>
          <select 
            [(ngModel)]="filtros.deporte"
            (ngModelChange)="aplicarFiltros(true)"
            class="select-pill"
          >
            <option value="todos">Todos los deportes</option>
            <option *ngFor="let deporte of deportes.slice(1)" [value]="deporte.toLowerCase()">
              {{ deporte }}
            </option>
          </select>
        </div>

        <!-- Precio M√°ximo -->
        <div class="filtro-pill">
          <i eva-icon="pricetags-outline" eva-pack="outline" class="icon-filter"></i>
          <div class="range-wrapper">
            <label class="range-label">Max: ${{ filtros.precioMax }}/h</label>
            <input 
              type="range" 
              [(ngModel)]="filtros.precioMax"
              (ngModelChange)="aplicarFiltros(true)"
              min="10"
              max="100"
              class="range-pill"
            />
          </div>
        </div>

        <!-- Calificaci√≥n M√≠nima -->
        <div class="filtro-pill">
          <i eva-icon="star-outline" eva-pack="outline" class="icon-filter"></i>
          <select 
            [(ngModel)]="filtros.calificacionMin"
            (ngModelChange)="aplicarFiltros(true)"
            class="select-pill"
          >
            <option [value]="0">Todas las calificaciones</option>
            <option [value]="4">4+ estrellas</option>
            <option [value]="4.5">4.5+ estrellas</option>
            <option [value]="4.8">4.8+ estrellas</option>
          </select>
        </div>
      </div>
    </div>
  </section>

  <!-- Lista de Entrenadores -->
  <section class="lista-section">
    <div class="container">
      <div class="entrenadores-grid">
        <div 
          *ngFor="let entrenador of entrenadoresFiltrados"
          class="entrenador-card-premium"
          (click)="verPerfil(entrenador)"
        >
          <div class="card-image-premium">
            <img [src]="entrenador.foto" [alt]="entrenador.nombre" />
            <span *ngIf="entrenador.destacado" class="badge-card-star">‚≠ê</span>
            <span class="badge-nivel-premium" [class.elite]="entrenador.nivel === 'ELITE'">
              {{ entrenador.nivel }}
            </span>
          </div>

          <div class="card-content-premium">
            <h3 class="card-nombre-premium">{{ entrenador.nombre }}</h3>
            <p class="card-ubicacion-premium">üìç {{ entrenador.ubicacion }}</p>

            <div class="card-rating-premium">
              <span *ngFor="let star of getEstrellas(entrenador.calificacion)" class="star">
                {{ star === 'full' ? '‚≠ê' : '‚òÜ' }}
              </span>
              <span class="rating-number-premium">{{ entrenador.calificacion }}</span>
            </div>

            <p class="card-especialidad-premium">{{ entrenador.especialidad }}</p>

            <div class="card-modalidad-premium">
              <span *ngFor="let mod of entrenador.modalidad" class="modalidad-badge-premium">
                {{ mod }}
              </span>
            </div>

            <div class="card-footer-premium">
              <span class="card-precio-premium">${{ entrenador.precioHora }} <small>MXN/hora</small></span>
              <button class="btn-contactar-premium" (click)="verPerfil(entrenador); $event.stopPropagation()">
                Ver Perfil
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Mensaje si no hay resultados -->
      <div *ngIf="entrenadoresFiltrados.length === 0" class="sin-resultados">
        <p>üòï No encontramos entrenadores con esos criterios</p>
        <button class="btn-limpiar" (click)="filtros = { deporte: 'todos', precioMax: 500, modalidad: 'todos', nivel: 'todos', calificacionMin: 0 }; aplicarFiltros()">
          Limpiar filtros
        </button>
      </div>
    </div>
  </section>
</div>

<ngx-shared-footer></ngx-shared-footer>
  </nb-layout-column>
</nb-layout>
